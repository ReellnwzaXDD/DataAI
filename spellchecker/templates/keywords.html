<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Keywords Manager (คำเฉพาะ)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    h1 { text-align: center; }
    .msg { color: green; margin-bottom: 1rem; text-align: center; }
    table { border-collapse: collapse; width: 100%; max-width: 800px; margin: 1rem auto; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; }
    form.inline { display: inline; }
    .topbar { text-align: center; margin-bottom: 1rem; }
    .topbar a { margin-right: 1rem; }
  </style>
  <script>
    function editRow(term, lang) {
      const input = prompt('Edit term:', term);
      if (input === null) return;
      const form = document.getElementById('edit-form');
      form.elements['old'].value = term;
      form.elements['new'].value = input.trim();
      form.elements['lang'].value = lang || 'en';
      form.submit();
    }
  </script>
  </head>
<body>
  <div class="topbar">
    <a href="/">← Back</a>
  </div>
  <h1>Keywords Manager (คำเฉพาะ)</h1>
  {% if message %}
  <div class="msg">{{ message }}</div>
  {% endif %}

  <form action="/keywords/protect" method="post" style="text-align:center; margin-bottom:1rem;">
    <input type="hidden" name="protect" value="0">
    <label style="margin-right:0.5rem;">
      <input type="checkbox" name="protect" value="1" {% if protect %}checked{% endif %} onchange="this.form.submit()">
      Protect keywords (skip suggestions)
    </label>
    <span style="color:#666;">Current: {% if protect %}ON{% else %}OFF{% endif %}</span>
  </form>

  <h2 style="text-align:center;">Thai (ไทย)</h2>
  <form action="/keywords/add" method="post" style="text-align:center;">
    <input type="hidden" name="lang" value="th">
    <input type="text" name="term" placeholder="เพิ่มคำไทย" required>
    <button type="submit">Add</button>
  </form>
  <table>
    <thead>
      <tr><th>#</th><th>Term</th><th>Actions</th></tr>
    </thead>
    <tbody>
      {% for t in terms_th %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ t }}</td>
        <td>
          <button type="button" onclick="editRow('{{ t }}','th')">Edit</button>
          <form class="inline" action="/keywords/delete" method="post" onsubmit="return confirm('Delete term: {{ t }} ?');">
            <input type="hidden" name="lang" value="th">
            <input type="hidden" name="term" value="{{ t }}">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
      {% if not terms_th %}
      <tr><td colspan="3" style="text-align:center;color:#666;">No Thai terms.</td></tr>
      {% endif %}
    </tbody>
  </table>

  <h2 style="text-align:center;">English</h2>
  <form action="/keywords/add" method="post" style="text-align:center;">
    <input type="hidden" name="lang" value="en">
    <input type="text" name="term" placeholder="Add English term" required>
    <button type="submit">Add</button>
  </form>
  <table>
    <thead>
      <tr><th>#</th><th>Term</th><th>Actions</th></tr>
    </thead>
    <tbody>
      {% for t in terms_en %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ t }}</td>
        <td>
          <button type="button" onclick="editRow('{{ t }}','en')">Edit</button>
          <form class="inline" action="/keywords/delete" method="post" onsubmit="return confirm('Delete term: {{ t }} ?');">
            <input type="hidden" name="lang" value="en">
            <input type="hidden" name="term" value="{{ t }}">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
      {% if not terms_en %}
      <tr><td colspan="3" style="text-align:center;color:#666;">No English terms.</td></tr>
      {% endif %}
    </tbody>
  </table>

  <!-- hidden edit form -->
  <form id="edit-form" action="/keywords/update" method="post" style="display:none;">
    <input type="hidden" name="lang">
    <input type="hidden" name="old">
    <input type="hidden" name="new">
  </form>
</body>
</html>
